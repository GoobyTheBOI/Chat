<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="main.css">
    </head>
    <body>
        <div class="chatrooms-background"></div>
        <nav class="menu">
            <h1 class="menu__title">Enter chatbox</h1>
            <p class="menu__nickname">#Nickname</p>
            <div class="menu__flex-end menu__hide">
                <button class="menu__button menu__button--active menu__button-background menu__button-background--rooms">ROOMS</button>
                <button class="menu__button menu__button--blue menu__button-background menu__button-background--users">USERS</button>
                <button class="menu__button menu__button--blue menu__button-background menu__button-background--quit">QUIT</button>
            </div>

        </nav>
        <div class="container-chatrooms">
            <div class="chatarea">
                <ul class="messages messages--received">
                    <li class="chatarea__message">Hans</li>
                </ul>

                <ul class="messages messages--margin-top messages--send messages--send-margin-top">
                    <li class="chatarea__message chatarea__message">Hans</li>
                </ul>

                <ul class="messages messages messages--received messages--received-margin-top">
                    <li class="chatarea__message">Hans</li>
                </ul>


            </div>
            <div class="chatrooms chatrooms--margin-top">
                <a href="/javascript">
                    <div class="chatrooms__chatroom chatrooms__chatroom--blue">
                        <div class="chatrooms__inline-flex">
                            <h4 class="chatrooms__title">Javascript</h4>
                        </div>
                        <div class="chatrooms__inline-flex chatrooms__inline-flex--flex-end">
                            <p class="chatrooms__users">14</p>
                            <img src="./img/users.png" style="padding-left: 7px;" alt="user">
                        </div>
                        <div class="chatrooms__flex">
                            <p class="chatrooms__text">Test</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="chatrooms">
                <div class="chatrooms__chatroom chatrooms__chatroom--light-gray">
                    <div class="chatrooms__inline-flex">
                        <h4 class="chatrooms__title">Test</h4>
                    </div>
                    <div class="chatrooms__inline-flex chatrooms__inline-flex--flex-end">
                        <p class="chatrooms__users">14</p>
                        <img src="./img/users.png" style="padding-left: 7px;" alt="user">
                    </div>
                    <div class="chatrooms__flex">
                        <p class="chatrooms__text">Test</p>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <form class="footer__form" action="">
                <input type="text" autocomplete="off" class="footer__message" placeholder="Type your message..." aria-label="Message..." id="m">
                <!-- <input type="submit" value="Submit"> -->
            </form>
            <img src="./img/message-square-blue.png" class="footer__img" alt="message">
            <img src="./img/users-lightgray.png" class="footer__img footer__img--users" alt="message">
            <img src="./img/sign-out-alt-solid.png" class="footer__img footer__img--logout" alt="message">
        </footer>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="main.bundle.js"></script>
        <script>
            const room = 'javascript';
            const socket = io('/tech');

            $('form').submit(() => {
                let msg = $('#m').val()
                //return data, wordt in de id 'm' gezet en de room
                socket.emit('message', { msg, room });
                $("#m").val('');
                return false;
            });

            socket.on('connect', () => {
                //event toevoegen voor iedereen
                socket.emit('join', { room: room });
            });

            //veranderd de html naar de message
            socket.on('message', (msg) => {
                $('#messages').append($('<li>').text(msg))
            });
        </script>
    </body>
</html>